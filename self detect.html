<!DOCTYPE html>
<html lang="en">
<head>
    <title>Anti duplicate software</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.8.335/pdf.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.27.0/ace.js"></script>
    <link rel="stylesheet" href="home.css">   
    <link rel="database" href="database.js">

</head>
<body>
    <nav>
        <div class="Pname">
            <img class="logo" src="https://www.freeiconspng.com/uploads/red-and-black-wings-with-x-gaming-logo-png-21.png">
                <p>Piads</p>
        <div class="menu">
            <span class="feat"><a class="Act" href="home.html">Home</a></span>
            <div class="dropdown">
                <span class=""><a class="Activ" href="#">Detector</a></span>
                <div class="dropdown-content">
                    <a class="drop" href="one-to-one.html">One-to-One</a>
                    <a class="drop" href="self detect.html">Self Detect</a>
                    <a class="drop" href="All plagi.html">All Plagi</a>
                </div>
            </div>
            <span class="feat"><a class="no" href="status.html">status</a></span>
            <span class="feat"><a class="no" href="all logins.html">Login</a></span>
            <span class="feat"><a class="no" href="Admin.html">Admin</a></span>
            <div class="logout">
                <span class="fea"><img id="dark" src="yash moon.png"></span>
        </div>
    </nav><br><br><br><br><br>
    <div class="content">
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Code Repeated Checker</title>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.7/ace.css" type="text/css" charset="utf-8">
        </head>
        <body>
            <div class="type">
                <span class="ty"><a class="Acc" href="one-to-one.html">HTML</a></span>
                <a class="ty" href="css.html">CSS</a>
                <a class="ty" href="js.html">JS</a>
        </div>
            <h1>Code Repeated Checker</h1>
            
            <div class="editor-container">
                <div id="editor"></div>
            </div>
        
            <div class="check">
                <button id="checkButton">Check Repeated Code</button>
            </div>
            
            <div class="result">
                <h2>Repeated Code Blocks:</h2>
                <ul id="repeatedCodeList"></ul>
            </div>
        </div>
        <script src="script.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.7/ace.js" type="text/javascript" charset="utf-8"></script>
            <script>
                document.addEventListener("DOMContentLoaded", function() {
                    const editor = ace.edit("editor");
                    editor.setTheme("ace/theme/cobalt");
                    editor.getSession().setMode("ace/mode/javascript");
                    
                    const checkButton = document.getElementById("checkButton");
                    checkButton.addEventListener("click", checkRepeatedCode);
                });
                
                function checkRepeatedCode() {
                    const editor = ace.edit("editor");
                    const code = editor.getValue();
                    
                    const repeatedBlocks = findRepeatedCodeBlocks(code);
                
                    displayRepeatedCodeBlocks(repeatedBlocks);
                }
                
                function findRepeatedCodeBlocks(code) {
                    const repeatedBlocks = [];
                    const seenBlocks = {};
                
                    const codeLines = code.split('\n');
                
                    for (let i = 0; i < codeLines.length; i++) {
                        const currentBlock = codeLines[i].trim();
                        
                        if (!seenBlocks[currentBlock]) {
                            seenBlocks[currentBlock] = [i];
                        } else {
                            seenBlocks[currentBlock].push(i);
                        }
                    }
                
                    for (const block in seenBlocks) {
                        const lineNumbers = seenBlocks[block];
                        if (lineNumbers.length > 1) {
                            repeatedBlocks.push({ text: block, lines: lineNumbers });
                        }
                    }
                
                    return repeatedBlocks;
                }
                
                function displayRepeatedCodeBlocks(repeatedBlocks) {
                    const repeatedCodeList = document.getElementById("repeatedCodeList");
                    repeatedCodeList.innerHTML = '';
                
                    repeatedBlocks.forEach(block => {
                        const editor = ace.edit("editor");
                        const startPosition = editor.session.doc.indexToPosition(block.lines[0], 0);
                        const endPosition = editor.session.doc.indexToPosition(block.lines[block.lines.length - 1], 0);
                
                        const listItem = document.createElement('li');
                        listItem.textContent = `Lines ${startPosition.row + 1}-${endPosition.row + 1}: ${block.text}`;
                        repeatedCodeList.appendChild(listItem);
                    });
                }
                
            </script>
        
</body>
</html>